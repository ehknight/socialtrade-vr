$(document).ready(function(){var t=io.connect("http://"+document.domain+":"+location.port);window.socket=t;$("#backbutton").on("click",function(){$.playSound("/static/back");var e=document.createElement("a-animation");e.setAttribute("attribute","scale"),e.setAttribute("from","0.5 0.5 0.5"),e.setAttribute("to","1 1 1"),e.setAttribute("dur","200"),e.setAttribute("repeat","0"),$("#backbutton").append(e);var i=document.createElement("a-animation");i.setAttribute("delay","200"),i.setAttribute("attribute","scale"),i.setAttribute("from","1 1 1"),i.setAttribute("to","0.5 0.5 0.5"),i.setAttribute("dur","200"),i.setAttribute("repeat","0"),$("#backbutton").append(i),t.emit("go_back")}),t.on("check_vive_connected",function(){t.emit("heartbeat")}),t.on("receive_views",function(t){try{$("#currentview").remove()}catch(e){}try{var i=document.createElement("a-animation");i.setAttribute("attribute","position"),i.setAttribute("to","0 -1 0"),i.setAttribute("dur","2000"),i.setAttribute("repeat","0"),i.setAttribute("animationend",$("#view_box").remove()),$("#view_box").append(i)}catch(e){}total_html="";for(var a=0;a<t.length;a++){var n=t[a],o=n.id+"img_asset";$("#aframe-assets").append("<img id='"+o+"' src='"+n.image+"' crossorigin='anonymous'>");var r="<a-curvedimage id='"+n.id+"img' src='#"+o+"' position='"+n.image_pos+"' height='6' radius='10' theta-length='50' rotation='"+n.theta+"' crossorigin=anonymous>",s="<a-entity id='"+n.id+"button' geometry='primitive:box' position='4.1 -4.2 9' rotation='0 295 0' material='color:white' scale='1 2 7' move='target:#user;position:0 "+n.button_height+" 0;level:"+n.level+";'>",u="<a-entity bmfont-text='text: "+n.name+"; fnt:/futura.fnt; fntImage:/futura.png; width:800; lineHeight:60; align:center; color:black;' scale='0.21 0.72 1.00' position='-0.51 "+n.text_pos_height+" -0.42' rotation='0 270 0'> </a-entity>",c="</a-entity></a-curvedimage>",m="<script id='"+n.id+"script'>document.querySelector('"+n.hash_id+"button').addEventListener('click', function(){if ("+n.is_stack+") {console.log('yep');var user_animation = document.createElement('a-animation');user_animation.setAttribute('attribute','position');user_animation.setAttribute('to','0 0 0');user_animation.setAttribute('repeat','0');user_animation.setAttribute('dur','2000');$('#user').append(user_animation);console.log('i have been clicked!');window.socket.emit('send_view', {data: '"+n.id+"'});return;}});</script>",d=r+s+u+c+m;total_html+=d}$("#scene").append("<a-entity id='view_box' visible='true'><a-animation attribute='position' from='0 20 0' to='0 -0.4 0' dur='3000'></a-animation>"+total_html+"</a-entity>")})});